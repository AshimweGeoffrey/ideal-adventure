{"ast":null,"code":"import _objectSpread from\"/home/micro/ideal-adventure/portfolio-26466/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import{useAuth}from\"../services/AuthContext\";import{toast}from\"react-toastify\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Profile=()=>{const[profileData,setProfileData]=useState({username:\"\",email:\"\",currentPassword:\"\",newPassword:\"\",confirmPassword:\"\"});const[loading,setLoading]=useState(false);const{user,updateProfile}=useAuth();useEffect(()=>{if(user){setProfileData({username:user.username||\"\",email:user.email||\"\",currentPassword:\"\",newPassword:\"\",confirmPassword:\"\"});}},[user]);const handleChange=e=>{setProfileData(_objectSpread(_objectSpread({},profileData),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();setLoading(true);try{if(profileData.newPassword&&profileData.newPassword!==profileData.confirmPassword){toast.error(\"New passwords do not match\");return;}const updateData={username:profileData.username,email:profileData.email};if(profileData.newPassword){updateData.currentPassword=profileData.currentPassword;updateData.newPassword=profileData.newPassword;}await updateProfile(updateData);toast.success(\"Profile updated successfully\");// Clear password fields\nsetProfileData(_objectSpread(_objectSpread({},profileData),{},{currentPassword:\"\",newPassword:\"\",confirmPassword:\"\"}));}catch(error){toast.error(error.message||\"Failed to update profile\");}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"card-title\",children:\"Profile Settings\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Basic Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",className:\"form-label\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"username\",name:\"username\",value:profileData.username,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"form-label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"email\",name:\"email\",value:profileData.email,onChange:handleChange,required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Change Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"currentPassword\",className:\"form-label\",children:\"Current Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"currentPassword\",name:\"currentPassword\",value:profileData.currentPassword,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"newPassword\",className:\"form-label\",children:\"New Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"newPassword\",name:\"newPassword\",value:profileData.newPassword,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"confirmPassword\",className:\"form-label\",children:\"Confirm New Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"confirmPassword\",name:\"confirmPassword\",value:profileData.confirmPassword,onChange:handleChange})]})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:loading,children:loading?\"Updating...\":\"Update Profile\"})]})]})})})});};export default Profile;","map":{"version":3,"names":["React","useState","useEffect","useAuth","toast","jsx","_jsx","jsxs","_jsxs","Profile","profileData","setProfileData","username","email","currentPassword","newPassword","confirmPassword","loading","setLoading","user","updateProfile","handleChange","e","_objectSpread","target","name","value","handleSubmit","preventDefault","error","updateData","success","message","className","children","onSubmit","htmlFor","type","id","onChange","required","disabled"],"sources":["/home/micro/ideal-adventure/portfolio-26466/frontend/src/components/Profile.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useAuth } from \"../services/AuthContext\";\nimport { toast } from \"react-toastify\";\n\nconst Profile = () => {\n  const [profileData, setProfileData] = useState({\n    username: \"\",\n    email: \"\",\n    currentPassword: \"\",\n    newPassword: \"\",\n    confirmPassword: \"\",\n  });\n  const [loading, setLoading] = useState(false);\n  const { user, updateProfile } = useAuth();\n\n  useEffect(() => {\n    if (user) {\n      setProfileData({\n        username: user.username || \"\",\n        email: user.email || \"\",\n        currentPassword: \"\",\n        newPassword: \"\",\n        confirmPassword: \"\",\n      });\n    }\n  }, [user]);\n\n  const handleChange = (e) => {\n    setProfileData({\n      ...profileData,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n\n    try {\n      if (\n        profileData.newPassword &&\n        profileData.newPassword !== profileData.confirmPassword\n      ) {\n        toast.error(\"New passwords do not match\");\n        return;\n      }\n\n      const updateData = {\n        username: profileData.username,\n        email: profileData.email,\n      };\n\n      if (profileData.newPassword) {\n        updateData.currentPassword = profileData.currentPassword;\n        updateData.newPassword = profileData.newPassword;\n      }\n\n      await updateProfile(updateData);\n      toast.success(\"Profile updated successfully\");\n\n      // Clear password fields\n      setProfileData({\n        ...profileData,\n        currentPassword: \"\",\n        newPassword: \"\",\n        confirmPassword: \"\",\n      });\n    } catch (error) {\n      toast.error(error.message || \"Failed to update profile\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"row justify-content-center\">\n      <div className=\"col-md-8\">\n        <div className=\"card\">\n          <div className=\"card-body\">\n            <h2 className=\"card-title\">Profile Settings</h2>\n            <form onSubmit={handleSubmit}>\n              <div className=\"row\">\n                <div className=\"col-md-6\">\n                  <h5>Basic Information</h5>\n                  <div className=\"mb-3\">\n                    <label htmlFor=\"username\" className=\"form-label\">\n                      Username\n                    </label>\n                    <input\n                      type=\"text\"\n                      className=\"form-control\"\n                      id=\"username\"\n                      name=\"username\"\n                      value={profileData.username}\n                      onChange={handleChange}\n                      required\n                    />\n                  </div>\n                  <div className=\"mb-3\">\n                    <label htmlFor=\"email\" className=\"form-label\">\n                      Email\n                    </label>\n                    <input\n                      type=\"email\"\n                      className=\"form-control\"\n                      id=\"email\"\n                      name=\"email\"\n                      value={profileData.email}\n                      onChange={handleChange}\n                      required\n                    />\n                  </div>\n                </div>\n\n                <div className=\"col-md-6\">\n                  <h5>Change Password</h5>\n                  <div className=\"mb-3\">\n                    <label htmlFor=\"currentPassword\" className=\"form-label\">\n                      Current Password\n                    </label>\n                    <input\n                      type=\"password\"\n                      className=\"form-control\"\n                      id=\"currentPassword\"\n                      name=\"currentPassword\"\n                      value={profileData.currentPassword}\n                      onChange={handleChange}\n                    />\n                  </div>\n                  <div className=\"mb-3\">\n                    <label htmlFor=\"newPassword\" className=\"form-label\">\n                      New Password\n                    </label>\n                    <input\n                      type=\"password\"\n                      className=\"form-control\"\n                      id=\"newPassword\"\n                      name=\"newPassword\"\n                      value={profileData.newPassword}\n                      onChange={handleChange}\n                    />\n                  </div>\n                  <div className=\"mb-3\">\n                    <label htmlFor=\"confirmPassword\" className=\"form-label\">\n                      Confirm New Password\n                    </label>\n                    <input\n                      type=\"password\"\n                      className=\"form-control\"\n                      id=\"confirmPassword\"\n                      name=\"confirmPassword\"\n                      value={profileData.confirmPassword}\n                      onChange={handleChange}\n                    />\n                  </div>\n                </div>\n              </div>\n\n              <button\n                type=\"submit\"\n                className=\"btn btn-primary\"\n                disabled={loading}\n              >\n                {loading ? \"Updating...\" : \"Update Profile\"}\n              </button>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Profile;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}